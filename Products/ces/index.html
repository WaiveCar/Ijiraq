<!doctype html5>
<head>
  <title>Oliver, by Waive, Free for CES</title>
  <meta name=viewport content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,900&display=swap" rel="stylesheet">
<style>
  * {
    font-family: 'Roboto', sans-serif;
  }
  body { 
    background: #514aff;
    color: #fff;
    height: 100%;
    margin: 0;
  }
  #map {
    height: 50vw;
    background: lightgrey;
    position:relative;
    z-index: -1;
  }
  .full {
    width: 100%;
  }
  button { 
    padding: 1.75vh 7vh;
    color: #fff;
    background: #514aff;
    font-weight: 800;
    border: 4px;
    border-radius: 4vh;
    text-transform: uppercase;
  }
  form {
    border-radius: 3vh 3vh 0 0;
    padding: 2vh;
    margin: 0;
  }
  form.light {
    background: #fff;
    color: #514aff;
    box-shadow: 0 0 6px 1px rgba(0,0,0,0.2);
  } 
  button.white { 
    background: #fff;
    color: #514aff;
  }
  button.primary { 
    background: #ff4d7d;
    font-size: 1.05rem;
  }
  input[type="text"],textarea {
    padding: .5rem;
    border-radius: 2.5vh;
    background: #edecff;
    border: 0;
    font-size: 1.2rem;
    color: #514aff;
    width: 100%;
  }
  input[type="text"]::placeholder,textarea::placeholder{
    color: #514aff;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  textarea::placeholder{
    font-weight: 800;
    line-height: 13vh;
  }
  textarea {
    height: 15vh;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    font-weight: 800;
    justify-content: center;
  }
  #header {
    text-align: center;
    background: #514aff;
    padding-bottom: 10vh;
  }
  #header-message {
    margin: 0;
    font-weight: 900;
    padding: 3vh 2vh 3vh;
  }
  #logo {
    margin: 3.5vh 0 2vh;
    width: 33%;
  }
  #white-box-parent {
    height: 8vh;
    overflow: visible;
  }
  .white-box {
    text-align: center;
    margin: -8vh 2vh 0;
    background: #fff;
    color: #514aff;
    height: 15vh;
    display: flex;
    border: .5vh solid #514aff;
    border-radius: 3vh;
    align-items: center;
    justify-content: center;
    font-size: 1.7rem;
    font-weight: 900;
    box-shadow: 0 0 6px 1px rgba(0,0,0,0.2);
  }
  form.light input, form.light label {
    margin: 1.5vh 0;
    text-align: center;
  }
  form.light label {
    margin-top:0;
    display:block
  }
  #bottom {
    position: absolute;
    bottom: 0;
    width: 100%;
    left: 0;
  }

  .create,.dashboard {
    display: none;
  }
  #go-again {
    width: 100%;
    background: #514aff;
    text-align: center;
  }
  #go-again button {
    margin: 1vh 0;
  }
  .dashboard #header { height: 28vh; }
  .dashboard #go-again { 
    padding-top: 1vh;
    height: 20vh; }
  /* There's 10vh margin on the header */
  .dashboard #map { 
    border-radius: 2vh;
    margin: 0 1vh;
    height: 41vh; }
  
</style>
</head>
<body>

  <div id="header">
    <img id="logo" src=oliver_logo_path.svg>
    <h1 class=dashboard id=header-message>your message just played!</h1>
  </div>

  <div id='white-box-parent'>
    <div class='white-box'>
      this is my message
    </div>
  </div>
  <!--
  <div id="pitch">
    <h2>free cartop ads during CES.</h2>
  </div>

  -->
  <div id="map"></div>
  <div id="bottom">
    <div id="input" class="create">
      <form class='light'>
        <textarea class='message' name="message" id="message" placeholder="Enter message"></textarea>
        <input type="text" placeholder="Enter phone number" name="phone" id="phone">
        <label>
          <input type=checkbox required>
          I agree with terms & conditions
        </label>
        <button class='full'>Continue</button>
      </form>
    </div>

    <div id="go-again" class='dashboard'>
      <div>
      <button class='white'>share</button>
      </div>
      <button class='primary'>make another</button>
    </div>
  </div>
</body>
  <script>
    var id = 56;
// either create pitch or dashboard
function setMode(what) {
  document.body.classList.add(what);
  for(let i of document.querySelectorAll(`.${what}`)) {
    i.style.display = 'block';
  }
}

    function initMap() {
      fetch(`/api/heatmap?id=${id}`)
        .then(response => response.json())
        .then(points => {
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 14,
            center: {lat: points[0][0], lng: points[0][1]}
          });

          var heatmap = new google.maps.visualization.HeatmapLayer({
            data: points.map(row => ( {location: new google.maps.LatLng(row[0], row[1])} )),
            map: map,
            maxIntensity: 30,
            radius: 4,
            opacity: 1
          });
        });
    }
window.onload = function() {
  setMode('dashboard');
}
  </script>
  <!--
  <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBibUDNVBjFAKpwyPcZirJW4qHq2W2OO8M&libraries=visualization&callback=initMap">
  </script>
  -->
</html>
