<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel='shortcut icon' type='image/x-icon' href='assets/favicon.png' />
    <link rel="stylesheet" href="custom.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,600,700" media="all">
    <title>Waive Ads</title>
  </head>
  <header class="header">
    <img class="logo" src="assets/logo-dark.png">
  </header>
  <body>
    <form>
      <div class="container">
        <h3 class="mt-4 mb-4 title">Where Would You Like to Advertise?</h3>
        <h4 class="text-primary title ml-3">Our Most Popular Times and Locations:</h4>
        <div class="card-group mt-2" id="popular-list">
        </div>
        <div class="row justify-content-md-center mt-5">
          <div class="alert alert-secondary text-center" role="alert">
            Or choose your time, place or car:
            <hr>
            <div>
              <a role="button" class="btn btn-primary" href="./">Starting at $1</a>
            </div>
            <hr>
            <div class="non-profits">
              For non-profits, community organizations or similar, please contact us directly about free advertising!
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid index-background mt-5">
        <div class="container text-info">
          <h3 class="pt-3 title">Add Your Advertisement</h3>
          <div class="text-center">The recommended image size for our screens is 1920 X 756 Pixels</div>
          <div class="row justify-content-md-center">
            <div id="upload-holder" class="mt-5">
              <label class="btn btn-info" for="image-upload">
                Click to Upload
              </label>
              <input id="image-upload" class="form-control-file" type="file" name="ad-asset" accept="image/*">
            </div>
          </div>
          <div class="row justify-content-md-center mt-4">
            <div class="preview-holder">
              <img id="preview-image" src="#" alt="">
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid bg-info">
        <div class="container pt-4">
          <div class="row">
            How much money would you like to spend?
            <div class="input-group">
              <input type="number" id="desired-price" class="form-control mt-2 mb-2 col-3 float-right">
            </div>
            <button class="btn btn-primary" type="button" onclick="calculateOptions()">
              Calculate Options
            </button>
          </div>
          <div class="card-group mt-3" id="option-cards">
            <div class="card text-center">
              Option 1
              <div class="pb-2">
                <input type="radio" name="cart-options" value="option-1">
              </div>
            </div>
            <div class="card text-center">
              Option 2
              <div class="pb-2">
                <input type="radio" name="cart-options" value="option-2">
              </div>
            </div>
            <div class="card text-center">
              Option 3
              <div class="pb-2">
                <input type="radio" name="cart-options" value="option-3">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid">
        <div class="container">
          Pay Now / Login
        </div>
      </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="bootstrap.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script defer>
      axios.get('/splash_resources')
      .then(function(response) {
        var parser = new DOMParser();
        response.data.popularLocations.forEach(function(option){
          var htmlString = parser.parseFromString('\
            <div class="card text-center"> \
              <img class="location-image" src="assets/' + option.image + '"> \
              ' + option.name + '\
              <div class="pb-2">\
                <input type="radio" name="location" value="santa-monica"> \
              </div> \
            </div>', 'text/html'
          ).body.firstChild;
          var parentNode = document.getElementById('popular-list');
          parentNode.append(htmlString)
        });
      })
      .catch(function(err) {
        console.log('error: ', err);
      });
      var uploadInput = document.getElementById('image-upload');
      uploadInput.addEventListener('change', function() {
        var reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('preview-image').src = e.target.result;
          document.getElementById('upload-holder').style.display = 'none';
        }
        reader.readAsDataURL(uploadInput.files[0]);
      });
      document.addEventListener('keypress', function(e) {
        e.keyCode === 13 && e.preventDefault();
      });
      //This will eventually need to get real amounts based demand, but for now will show something
      var enteredAmount = document.getElementById('desired-price');
      enteredAmount.addEventListener('change', function(e) {
        console.log(e.target.value);
      });
      var optionCards = document.getElementById('option-cards');
      function calculateOptions() {
        optionCards.style.visibility = 'visible';
      }
    </script>
  </body>
</html>
